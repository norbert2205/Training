{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction ListComponent_tr_15_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 10);\n  }\n}\nfunction ListComponent_tr_15_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 6)(8, \"a\", 7);\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ListComponent_tr_15_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const user_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteUser(user_r2.Id));\n    });\n    i0.ɵɵtemplate(11, ListComponent_tr_15_span_11_Template, 1, 0, \"span\", 9);\n    i0.ɵɵtemplate(12, ListComponent_tr_15_span_12_Template, 2, 0, \"span\", 5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r2.FirstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r2.LastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r2.Username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"edit/\", user_r2.Id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", user_r2.isDeleting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r2.isDeleting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !user_r2.isDeleting);\n  }\n}\nfunction ListComponent_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 11);\n    i0.ɵɵelement(2, \"span\", 12);\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ListComponent {\n  constructor(accountService) {\n    this.accountService = accountService;\n  }\n  ngOnInit() {\n    this.accountService.getAll().pipe(first()).subscribe(users => this.users = users);\n  }\n  deleteUser(id) {\n    const user = this.users.find(x => x.Id === id);\n    user.isDeleting = true;\n    this.accountService.delete(id).pipe(first()).subscribe(() => this.users = this.users.filter(x => x.id !== id));\n  }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.AccountService));\n};\nListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListComponent,\n  selectors: [[\"ng-component\"]],\n  decls: 17,\n  vars: 2,\n  consts: [[\"routerLink\", \"add\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"mb-2\"], [1, \"table\", \"table-striped\"], [2, \"width\", \"30%\"], [2, \"width\", \"10%\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [2, \"white-space\", \"nowrap\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"me-1\", 3, \"routerLink\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", \"btn-delete-user\", 3, \"disabled\", \"click\"], [\"class\", \"spinner-border spinner-border-sm\", 4, \"ngIf\"], [1, \"spinner-border\", \"spinner-border-sm\"], [\"colspan\", \"4\", 1, \"text-center\"], [1, \"spinner-border\", \"spinner-border-lg\", \"align-center\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Users\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"a\", 0);\n      i0.ɵɵtext(3, \"Add User\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"table\", 1)(5, \"thead\")(6, \"tr\")(7, \"th\", 2);\n      i0.ɵɵtext(8, \"First Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"th\", 2);\n      i0.ɵɵtext(10, \"Last Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\", 2);\n      i0.ɵɵtext(12, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"th\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"tbody\");\n      i0.ɵɵtemplate(15, ListComponent_tr_15_Template, 13, 7, \"tr\", 4);\n      i0.ɵɵtemplate(16, ListComponent_tr_16_Template, 3, 0, \"tr\", 5);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngForOf\", ctx.users);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.users);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AACA,SAASA,KAAK,QAAQ,gBAAgB;;;;;;;ICkBlBC,2BAA8E;;;;;IAC9EA,4BAA+B;IAAAA,sBAAM;IAAAA,iBAAO;;;;;;IARxDA,0BAA+B;IACvBA,YAAkB;IAAAA,iBAAK;IAC3BA,0BAAI;IAAAA,YAAiB;IAAAA,iBAAK;IAC1BA,0BAAI;IAAAA,YAAiB;IAAAA,iBAAK;IAC1BA,6BAAgC;IACyCA,oBAAI;IAAAA,iBAAI;IAC7EA,kCAAiH;IAAzGA;MAAA;MAAA;MAAA;MAAA,OAASA,4CAAmB;IAAA,EAAC;IACjCA,wEAA8E;IAC9EA,wEAA4C;IAChDA,iBAAS;;;;IARTA,eAAkB;IAAlBA,uCAAkB;IAClBA,eAAiB;IAAjBA,sCAAiB;IACjBA,eAAiB;IAAjBA,sCAAiB;IAEdA,eAA6B;IAA7BA,gEAA6B;IACoDA,eAA4B;IAA5BA,6CAA4B;IACrGA,eAAqB;IAArBA,yCAAqB;IACrBA,eAAsB;IAAtBA,0CAAsB;;;;;IAIzCA,0BAAmB;IAEXA,2BAAmE;IACvEA,iBAAK;;;ADrBjB,OAAM,MAAOC,aAAa;EAGtBC,YAAoBC,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;EAAmB;EAErDC,QAAQ;IACJ,IAAI,CAACD,cAAc,CAACE,MAAM,EAAE,CACvBC,IAAI,CAACP,KAAK,EAAE,CAAC,CACbQ,SAAS,CAACC,KAAK,IAAI,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAC;EAC/C;EAEAC,UAAU,CAACC,EAAU;IACjB,MAAMC,IAAI,GAAG,IAAI,CAACH,KAAM,CAACI,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,EAAE,CAAC;IAC/CC,IAAI,CAACI,UAAU,GAAG,IAAI;IACtB,IAAI,CAACZ,cAAc,CAACa,MAAM,CAACN,EAAE,CAAC,CACzBJ,IAAI,CAACP,KAAK,EAAE,CAAC,CACbQ,SAAS,CAAC,MAAM,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAM,CAACS,MAAM,CAACJ,CAAC,IAAIA,CAAC,CAACH,EAAE,KAAKA,EAAE,CAAC,CAAC;EAC3E;;AAjBST,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAiB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCN1BtB,0BAAI;MAAAA,qBAAK;MAAAA,iBAAK;MACdA,4BAAwD;MAAAA,wBAAQ;MAAAA,iBAAI;MACpEA,gCAAmC;MAGAA,0BAAU;MAAAA,iBAAK;MACtCA,6BAAuB;MAAAA,0BAAS;MAAAA,iBAAK;MACrCA,8BAAuB;MAAAA,yBAAQ;MAAAA,iBAAK;MACpCA,yBAA4B;MAChCA,iBAAK;MAETA,8BAAO;MACHA,+DAWK;MACLA,8DAIK;MACTA,iBAAQ;;;MAjBiBA,gBAAQ;MAARA,mCAAQ;MAYxBA,eAAY;MAAZA,iCAAY","names":["first","i0","ListComponent","constructor","accountService","ngOnInit","getAll","pipe","subscribe","users","deleteUser","id","user","find","x","Id","isDeleting","delete","filter","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\DevProjects\\Training\\frontend\\src\\app\\users\\list.component.ts","C:\\DevProjects\\Training\\frontend\\src\\app\\users\\list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { first } from 'rxjs/operators';\r\n\r\nimport { AccountService } from '@app/_services';\r\n\r\n@Component({ templateUrl: 'list.component.html' })\r\nexport class ListComponent implements OnInit {\r\n    users?: any[];\r\n\r\n    constructor(private accountService: AccountService) {}\r\n\r\n    ngOnInit() {\r\n        this.accountService.getAll()\r\n            .pipe(first())\r\n            .subscribe(users => this.users = users);\r\n    }\r\n\r\n    deleteUser(id: string) {\r\n        const user = this.users!.find(x => x.Id === id);\r\n        user.isDeleting = true;\r\n        this.accountService.delete(id)\r\n            .pipe(first())\r\n            .subscribe(() => this.users = this.users!.filter(x => x.id !== id));\r\n    }\r\n}","<h1>Users</h1>\r\n<a routerLink=\"add\" class=\"btn btn-sm btn-success mb-2\">Add User</a>\r\n<table class=\"table table-striped\">\r\n    <thead>\r\n        <tr>\r\n            <th style=\"width: 30%\">First Name</th>\r\n            <th style=\"width: 30%\">Last Name</th>\r\n            <th style=\"width: 30%\">Username</th>\r\n            <th style=\"width: 10%\"></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr *ngFor=\"let user of users\">\r\n            <td>{{user.FirstName}}</td>\r\n            <td>{{user.LastName}}</td>\r\n            <td>{{user.Username}}</td>\r\n            <td style=\"white-space: nowrap\">\r\n                <a routerLink=\"edit/{{user.Id}}\" class=\"btn btn-sm btn-primary me-1\">Edit</a>\r\n                <button (click)=\"deleteUser(user.Id)\" class=\"btn btn-sm btn-danger btn-delete-user\" [disabled]=\"user.isDeleting\">\r\n                    <span *ngIf=\"user.isDeleting\" class=\"spinner-border spinner-border-sm\"></span>\r\n                    <span *ngIf=\"!user.isDeleting\">Delete</span>\r\n                </button>\r\n            </td>\r\n        </tr>\r\n        <tr *ngIf=\"!users\">\r\n            <td colspan=\"4\" class=\"text-center\">\r\n                <span class=\"spinner-border spinner-border-lg align-center\"></span>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}